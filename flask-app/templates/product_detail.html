{% extends "base.html" %}

{% block title %}{{ product.name }} - Ferremas{% endblock %}

{% block extra_css %}
<style>
    .product-image {
        max-height: 400px;
        object-fit: contain;
    }
    .quantity-control {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin: 1rem 0;
    }
    .quantity-control button {
        width: 30px;
        height: 30px;
        border-radius: 5px;
        border: none;
        background-color: var(--primary-color);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
    }
    .quantity-control input {
        width: 60px;
        text-align: center;
        border: 1px solid #dee2e6;
        border-radius: 5px;
        padding: 0.25rem;
    }
    .btn-add-to-cart {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
    }
    .btn-add-to-cart:hover {
        background-color: var(--secondary-color);
        border-color: var(--secondary-color);
    }
</style>
{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row">
        <div class="col-md-6">
            <img src="{{ url_for('static', filename='images/products/' + product.image) if product.image else url_for('static', filename='images/products/no-image.jpg') }}" 
                 class="img-fluid product-image" 
                 alt="{{ product.name }}">
        </div>
        <div class="col-md-6">
            <h1 class="mb-3">{{ product.name }}</h1>
            <p class="h3 text-primary mb-4">${{ '{:,.0f}'.format(product.price) }}</p>
            
            <div class="quantity-control">
                <button id="decrease-quantity" type="button">-</button>
                <input type="number" id="quantity" value="1" min="1" max="99">
                <button id="increase-quantity" type="button">+</button>
            </div>

            <button id="add-to-cart-btn" class="btn btn-primary btn-lg w-100 mb-3">
                <i class="fas fa-cart-plus me-2"></i>AÃ±adir al Carrito
            </button>

            <div id="add-result"></div>
        </div>
    </div>
</div>

<!-- Variables para JavaScript -->
<input type="hidden" id="product-id" value="{{ product.id }}">
<input type="hidden" id="user-status" value="{{ 'true' if user and session.get('user_id') else 'false' }}">
{% endblock %}